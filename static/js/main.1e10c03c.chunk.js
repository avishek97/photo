(this.webpackJsonpphotogallery=this.webpackJsonpphotogallery||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/camera.e1098f4c.png"},22:function(e,t,a){e.exports=a.p+"static/media/defaultpic.37f922ae.png"},23:function(e,t,a){e.exports=a(35)},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(19),l=a.n(o),r=a(8),i=a(3),s=a(9),m=a.n(s),d=a(2),u=a(11),p=a(1),f=function(){console.log("ok")},h=function(e){var t=e.title,a=void 0===t?"Photo Upload":t,n=e.funNav,o=void 0===n?"/":n,l=e.funFilter,i=void 0===l?{testFilter:f}:l,s=e.children,m=e.disp;return c.a.createElement("div",null,c.a.createElement("div",{className:"d-flex flex-row justify-content text-light box-shadow base"},c.a.createElement("div",{className:"p-2 bd-highlight color-head",style:{fontSize:"20px"}},"exit"===o?c.a.createElement("i",{className:"fa fa-angle-left color-head",onClick:f}):c.a.createElement(r.b,{to:o},c.a.createElement("i",{className:"fa fa-angle-left color-head"}))),c.a.createElement("div",{className:"p-2 bd-highlight color-head",style:{fontSize:"20px"}},a),c.a.createElement("div",{className:"ml-auto p-2 bd-highlight color-head "},c.a.createElement(x,{display:m,click:i}))),c.a.createElement("div",null,s))},g="https://dmstaging.dronahq.com/mdlz_russia_photogallery",b=function(e){return fetch("".concat(g,"/api/GetAllcomments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"},body:JSON.stringify({photoId:e})}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},E=function(e){return fetch("".concat(g,"/api/GetPhotoGalleryListFiltered"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"},body:JSON.stringify({filterFlag:e})}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},v=function(e,t){return fetch("".concat(g,"/api/SetPhotoLike"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"},body:JSON.stringify({userEmail:localStorage.getItem("useremail"),photoId:t,likeOrDislikeFlag:e})})},y=function(e){var t=Object(n.useState)("none"),a=Object(p.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(""),s=Object(p.a)(i,2),m=s[0],d=s[1],u=Object(n.useState)(e.commentCount),f=Object(p.a)(u,2),h=f[0],b=f[1],E="/viewcomments/".concat(e.photo_id),v=e.Uploaded_photo;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"cards bg-light"},c.a.createElement("div",{className:"card container"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",{class:"d-flex bd-highlight "},c.a.createElement("div",{class:" bd-highlight"},c.a.createElement("img",{src:e.Profile_pic,alt:"Avatar",className:"profile-pic"})),c.a.createElement("div",{className:"profile-name bd-highlight dot-div"},c.a.createElement("div",{className:"text-dark bold profile-text"},e.name," ")),c.a.createElement("div",{class:"ml-auto bd-highlight"},c.a.createElement(S,null)))),c.a.createElement("img",{src:v,alt:"picture",className:"card__img"}),c.a.createElement("div",{className:"card__info"},c.a.createElement("div",{class:"d-flex bd-highlight mb-2"},c.a.createElement("div",{class:" bd-highlight"},c.a.createElement(N,{like:e.likes,photoId:e.photo_id,likedByUsers:e.likedByUsers,LikedArray:e.LikeArray,userDetails:e.userId})),c.a.createElement("div",{class:" bd-highlight card-comment-icon"},c.a.createElement("i",{class:"far fa-comment-dots icon-size",onClick:function(){l("block")}}),c.a.createElement("div",{className:"like"},h))),c.a.createElement("div",{className:"description"},c.a.createElement("div",{className:"profile-caption"},e.description," "),c.a.createElement("div",{style:{display:o}},c.a.createElement(O,{send:function(){var t,a;l("none"),""!=m.trim()&&(b(h+1),t=m,a=e.photo_id,fetch("".concat(g,"/api/SetComment"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"},body:JSON.stringify({userEmail:localStorage.getItem("useremail"),photoId:a,comments:t})}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))),d("")},val:m,change:function(e){var t=e.target.value;d(t)}})),c.a.createElement("div",null,c.a.createElement(r.b,{to:E},c.a.createElement("span",null,"View All Comments"))))))))},j=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card d-flex flex-row bd-highlight mb-3"},c.a.createElement("div",{class:"p-2 bd-highlight"},c.a.createElement("img",{src:e.profile,alt:"Avatar",className:"comment-pic"})),c.a.createElement("div",{className:"p-2 bd-highlight flex-fill comment-div"},c.a.createElement("div",{className:"text-dark comment-name"},e.name),c.a.createElement("div",{className:"comment-text"},e.comments))))},O=function(e){return c.a.createElement("div",{className:"d-flex bd-highlight"},c.a.createElement("div",{className:"p-2 flex-grow-1 bd-highlight"},c.a.createElement("input",{type:"text",value:e.val,className:"input-box",onChange:e.change,placeholder:"Comment here.."})),c.a.createElement("div",{className:"p-2 bd-highlight"},""!=e.val?c.a.createElement("i",{className:"far fa-paper-plane icon-size",onClick:e.send,style:{"padding-top":"17px","padding-right":"5px"}}):c.a.createElement("i",{className:"far fa-paper-plane icon-size",style:{"padding-top":"17px","padding-right":"5px",opacity:"0.5"},disabled:!0})))},N=function(e){var t=Object(n.useState)(e.like),a=Object(p.a)(t,2),o=a[0],l=a[1],r=Object(n.useState)(0),i=Object(p.a)(r,2),s=i[0],m=i[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){null!==e.likedByUsers&&e.likedByUsers.map((function(e){e.liked_by_user_email===localStorage.getItem("useremail")&&m(1)}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"like-div"},1===s?c.a.createElement("i",{className:"fas fa-heart icon-size",value:"OnFoundUnlike",onClick:function(t){v(0,e.photoId),l(o-1),m(0)}}):c.a.createElement("i",{className:"far fa-heart icon-size",value:"OnNullLike",onClick:function(t){v(1,e.photoId),l(o+1),m(1)}}),c.a.createElement("div",{className:"like"},o)))},k=function(){var e=Object(n.useState)({loader:!0,content:[]}),t=Object(p.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){r()}),[]);var l=Object(i.f)().photoId;console.log(l);var r=function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(l);case 2:t=e.sent,console.log(t),o(Object(d.a)(Object(d.a)({},a),{},{content:t,loader:!1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(h,{title:"Comments",funNav:"/"},1==a.loader?c.a.createElement("img",{src:"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif",className:"loader"}):null===a.content.commentedByUsers?c.a.createElement(_,null):a.content.commentedByUsers.map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(j,{profile:e.commented_by_user_img_url,name:e.commented_by_user_name,comments:e.comments}))}))))},x=function(e){var t=e.click,a=e.display,o=Object(n.useState)("none"),l=Object(p.a)(o,2),r=l[0],i=l[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"dropdown",style:{float:"right",display:a}},"none"==r?c.a.createElement("i",{className:"fa fa-filter dropbtn",onClick:function(){i("block")}}):c.a.createElement("i",{className:"fas fa-times dropbtn",style:{fontSize:"25px",paddingBottom:"8px"},onClick:function(){i("none")}}),c.a.createElement("div",{className:"dropdown-content",style:{display:r}},c.a.createElement("button",{className:"btn btn-block",value:"mostliked",onClick:t},"Most Liked"),c.a.createElement("button",{className:"btn btn-block",value:"mostrecent",onClick:t},"Most Recent"))))},S=function(){var e=Object(n.useState)("none"),t=Object(p.a)(e,2),a=t[0],o=t[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"dropdown",style:{float:"right"}},"none"==a?c.a.createElement("i",{className:"fa fa-ellipsis-v dropbtn",onClick:function(){o("block")}}):c.a.createElement("i",{className:"fas fa-times dropbtn",style:{fontSize:"25px",paddingBottom:"8px"},onClick:function(){o("none")}}),c.a.createElement("div",{className:"dropdown-content",style:{display:a}},c.a.createElement("a",{href:"#"},"Report"))))},_=function(){return c.a.createElement("div",{className:"comments"},c.a.createElement("img",{src:"https://commentphotos.com/gallery/CommentPhotos.com_1388005763.jpg",alt:"No Comments"}))},I=a(21),C=a.n(I),w=a(16),F=a.n(w),A=function(){var e=Object(n.useState)({laoder:!0,imgArray:[]}),t=Object(p.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)({photo_caption:""}),r=Object(p.a)(l,2),i=r[0],s=r[1],m=Object(n.useState)([]),u=Object(p.a)(m,2),f=(u[0],u[1],Object(n.useState)("")),g=Object(p.a)(f,2),b=g[0],E=g[1],v=Object(n.useState)({loader:!0,file:[]}),y=Object(p.a)(v,2),j=y[0],O=y[1],N=Object(n.useState)([]),k=Object(p.a)(N,2),x=(k[0],k[1],i.photo_caption),S=a.imgArray,_=[],I=[],w=function(e){return fetch("https://plugin.api.dronahq.com/api/Imageupload",{method:"POST",body:e}).then((function(e){return e.json()})).catch((function(e){return e}))},A=function(e){var t=e.target.files;o(Object(d.a)(Object(d.a)({},a),{},{imgArray:t}));var n=function(e){for(var t=[],a=0;a<e.length;a++)if("string"===e[a])t.push(e[a]);else{var n=new FormData,c=e[a];if(c instanceof Blob){var o=e[a].name.split(".")[e[a].name.split(".").length-1];n.append("blob",c,"test."+o)}else n.append("file",c);n.append("dhqOperation","dhqPackageImageUpload"),n.append("tokenKey","35a35ad1ccd15ef778cc71542b8f573ab6b01bed4c2389bf38"),w(n).then((function(e){t.push(e.image_url)})).catch((function(e){console.log("some error occurred")}))}return t}(t);E(n),_.push(t);for(var c=0;c<_[0].length;c++)I.push(URL.createObjectURL(_[0][c]));O(Object(d.a)(Object(d.a)({},j),{},{file:I}))},P=function(e){s(Object(d.a)(Object(d.a)({},i),{},{photo_caption:e.target.value}))},U=function(){var e;""===i.photo_caption?F.a.fire("Caption is required"):(e=b,fetch("".concat("https://dmstaging.dronahq.com/mdlz_russia_photogallery","/api/InsertPhoto"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"},body:JSON.stringify({photoCaption:x,photoUrls:e[0],submitorEmail:localStorage.getItem("useremail"),likableFlag:1,commentableFlag:1,sharableFlag:1,bookmarkFlag:1})}),s(Object(d.a)(Object(d.a)({},i),{},{photo_caption:""})),F.a.fire({icon:"success",title:"Your work has been saved",showConfirmButton:!0}).then((function(e){return e.isConfirmed?window.history.go("/"):""})))};return c.a.createElement("div",null,c.a.createElement(h,{title:"Upload Photo",funNav:"/",disp:"none"},c.a.createElement("div",{className:"imgdiv"},""==j.file?c.a.createElement("img",{src:C.a,className:"cover"}):j.file.map((function(e){return c.a.createElement("img",{src:e,className:"cover"})})),c.a.createElement("div",{className:"input-div"},c.a.createElement("input",{placeholder:"Write about the photo**",value:i.photo_caption,type:"text",className:"input-box",onChange:P,required:!0}))),""!=S?c.a.createElement("label",{className:"btnClass footerDiv flex-center",onClick:U},"Upload Photo"):c.a.createElement("div",{className:" footerDiv flex-center"},c.a.createElement("label",{for:"myFile",className:"btnClass flex-center"},"Add Photo"),c.a.createElement("input",{type:"file",id:"myFile",name:"myFile",accept:"image/x-png,image/gif,image/jpeg",style:{display:"none"},onChange:A,multiple:!0}))))},P=a(22),U=a.n(P),z=function(){var e=Object(n.useState)({loader:!0,content:[]}),t=Object(p.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),i=Object(p.a)(l,2),s=i[0],f=i[1],b=Object(n.useState)({loader:!0,content:[]}),v=Object(p.a)(b,2),j=v[0],O=v[1],N=Object(n.useState)({loader:!0,content:[]}),k=Object(p.a)(N,2),x=k[0],S=k[1],_=Object(n.useState)({}),I=Object(p.a)(_,2),C=I[0],w=I[1];Object(n.useEffect)((function(){""==s?(localStorage.setItem("useremail","ghw@account.dronahq.com"),localStorage.setItem("username","GHW Admin"),localStorage.setItem("usernonce","db0a21604f"),P()):(localStorage.setItem("useremail","ghw@account.dronahq.com"),localStorage.setItem("username","GHW Admin"),localStorage.setItem("usernonce","db0a21604f"),z(s))}),[s]),Object(n.useEffect)((function(){A()}),[]);var F=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{Profile_pic:""!==e.uploaded_by_user_img?e.uploaded_by_user_img:U.a,name:e.uploaded_by_user_name,likes:e.like_count,description:e.photo_caption,Uploaded_photo:e.photo_urls,photo_id:e.photo_id,likedByUsers:e.likedByUsers,userId:C,commentCount:e.comment_count}))},A=function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/api/GetUserAuthentication"),{method:"POST",headers:{"Content-type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"},body:JSON.stringify({user_email:localStorage.getItem("useremail")})}).then((function(e){return e.json()})).catch((function(e){console.log(e)}));case 2:t=e.sent,w(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/api/GetPhotoGalleryList"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"08e5c57c7418ec24d538d4c8cc587ef11e187a0e82028e20f4"}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}));case 2:t=e.sent,o(Object(d.a)(Object(d.a)({},a),{},{content:t,loader:!1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(m.a.mark((function e(t){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="mostrecent"===t.trim().toLowerCase()?"most-recent":"most-liked",e.next=3,E(n);case 3:c=e.sent,"mostrecent"===t.trim().toLowerCase()?(O(Object(d.a)(Object(d.a)({},j),{},{content:c,loader:!1})),o(Object(d.a)(Object(d.a)({},a),{},{loader:!1}))):(S(Object(d.a)(Object(d.a)({},x),{},{content:c,loader:!1})),o(Object(d.a)(Object(d.a)({},a),{},{loader:!1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(h,{funFilter:function(e){f(e.target.value)},funNav:"exit",disp:"block"},c.a.createElement("div",null,""===s?!0===a.loader?c.a.createElement("img",{src:"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif",class:"loader"}):a.content.map(F):"mostrecent"===s?!0===j.loader?c.a.createElement("img",{src:"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif",class:"loader"}):a.content.map(F):!0===x.loader?c.a.createElement("img",{src:"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif",class:"loader"}):x.content.map(F),c.a.createElement(r.b,{to:"/uploadphoto",class:"float"},c.a.createElement("i",{class:"fa fa-plus my-float"})))))},B=function(){return c.a.createElement(r.a,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/",exact:!0,component:z}),c.a.createElement(i.a,{path:"/uploadphoto/",exact:!0,component:A}),c.a.createElement(i.a,{path:"/viewcomments/:photoId",exact:!0,component:k})))};a(34);l.a.render(c.a.createElement(B,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.1e10c03c.chunk.js.map